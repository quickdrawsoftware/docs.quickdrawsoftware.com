<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">CloudFormation Topology | Quickdraw Software Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.quickdrawsoftware.com/jitsi-cfn/topology"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="CloudFormation Topology | Quickdraw Software Docs"><meta data-react-helmet="true" name="description" content="The deployment has 4 redundant &quot;shards&quot; comprised of one Meet signalling server (which runs nginx, the Jitsi Meet frontend, prosody, and jicofo), and one or more autoscaled JVB servers, which run jitsi-videobridge2 for the actual audio/video traffic. Each shard is isolated from every other shard, but traffic will fail over automatically to a different shard via HAProxy if a full shard goes down. It optionally includes a coturn TURN server for NAT traversal, which is used by all shards."><meta data-react-helmet="true" property="og:description" content="The deployment has 4 redundant &quot;shards&quot; comprised of one Meet signalling server (which runs nginx, the Jitsi Meet frontend, prosody, and jicofo), and one or more autoscaled JVB servers, which run jitsi-videobridge2 for the actual audio/video traffic. Each shard is isolated from every other shard, but traffic will fail over automatically to a different shard via HAProxy if a full shard goes down. It optionally includes a coturn TURN server for NAT traversal, which is used by all shards."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.quickdrawsoftware.com/jitsi-cfn/topology"><link data-react-helmet="true" rel="alternate" href="https://docs.quickdrawsoftware.com/jitsi-cfn/topology" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.quickdrawsoftware.com/jitsi-cfn/topology" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.0c1eb2ef.css">
<link rel="preload" href="/assets/js/runtime~main.db23c2c6.js" as="script">
<link rel="preload" href="/assets/js/main.d096f0b3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Quickdraw Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Quickdraw Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Quickdraw Software</b></a><a href="https://quickdrawsoftware.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Back to Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/">Quickdraw Software Documentation</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Scalable Jitsi CloudFormation Stack</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/jitsi-cfn/overview">Scalable Jitsi Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/jitsi-cfn/topology">CloudFormation Topology</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/jitsi-cfn/prerequisites">Prerequisites</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/jitsi-cfn/parameters">Stack Parameters</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/jitsi-cfn/post-launch">Post-Launch Access</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/jitsi-cfn/usage">Usage Notes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/jitsi-cfn/customization">Customization</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/jitsi-cfn/faq">Frequently Asked Questions</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="theme-doc-markdown markdown"><header><h1>CloudFormation Topology</h1></header><p>The deployment has 4 redundant &quot;shards&quot; comprised of one Meet signalling server (which runs nginx, the Jitsi Meet frontend, prosody, and jicofo), and one or more autoscaled JVB servers, which run jitsi-videobridge2 for the actual audio/video traffic. Each shard is isolated from every other shard, but traffic will fail over automatically to a different shard via HAProxy if a full shard goes down. It optionally includes a coturn TURN server for NAT traversal, which is used by all shards.</p><p><img alt="Topology" src="/assets/images/jitsi-cfn-topology-28d6f0db84c6a870b7b432ac7fad5053.png"></p><p>By default, only one shard is active at launch. As load increases on a single shard, it will autoscale the number of videobridges in that shard (at 70% average CPU), up to 50 bridges in a single shard (the Meet/signalling server can typically handle a large number of bridges before needing a second shard). You should be able to host thousands of participants in a single shard.</p><p>If you need additional redundancy or need to scale even further, you can manually enable additional shards. You can do this either via the AWS EC2 console by changing the desired number of instances in the appropriate autoscaling groups for the Meet server and JVB servers from 0 to 1, or you can use the utility command line tool <code>jitsictl</code> via SSH on the control server.</p><p>There are 5 types of EC2 instances created by the stack:</p><ul><li><p>Control - this functions as the bastion host for SSH, runs the logging/monitoring infrastructure, and has management command line tools such as <code>jitsictl</code>. There&#x27;s only one Control instance per stack, which generally has low load.</p></li><li><p>HAProxy - this handles load balancing traffic between shards. It will autoscale to more instances automatically if needed, but a single HAProxy can handle tens of thousands of requests a second.</p></li><li><p>Meet - this is the signalling/web server that runs the frontend, Prosody, and Jicofo, and handles load balancing between bridges in a single shard. There will only ever be one instance per active shard.</p></li><li><p>JVB - this handles the actual A/V traffic and runs jitsi-videobridge2. You will have between 1-50 bridges per shard, and they will scale up and down automatically based on traffic.</p></li><li><p>TURN (optional) - when enabled, this runs a coturn TURN/STUN server for NAT traversal for clients on restrictive networks. The stack uses a single TURN server, which can be scaled vertically to support your required number of users needing NAT traversal, and can support many thousands of users on a single instance.</p></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/quickdrawsoftware/docs.quickdrawsoftware.com/docs/jitsi-cfn/jitsi-cfn-2-topology.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/jitsi-cfn/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Scalable Jitsi Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/jitsi-cfn/prerequisites"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Prerequisites Â»</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Quickdraw Docs</div><ul class="footer__items"><li class="footer__item"><a href="https://quickdrawsoftware.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Back to Home</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 Quickdraw Software. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.db23c2c6.js"></script>
<script src="/assets/js/main.d096f0b3.js"></script>
</body>
</html>